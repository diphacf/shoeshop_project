{% extends "base.html" %}
{% block title %}Đăng ký tài khoản - ShoeStore{% endblock %}
{% block content %}
<!-- Ẩn navbar & footer mặc định -->
<style>.navbar, footer {display:none !important;}</style>
<header class="auth-nav">
  <nav class="auth-nav__inner">
    <div class="auth-brand">ShoeStore<span></span></div>
    <ul class="auth-links">
      <li><a href="{{ url_for('home') }}">Trang chủ</a></li>
      <li><a href="{{ url_for('giohang') }}">Giỏ hàng</a></li>
      <li><a class="active" href="{{ url_for('register') }}">Đăng ký</a></li>
      <li><a href="{{ url_for('login') }}">Đăng nhập</a></li>
    </ul>
  </nav>
</header>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {--bg-deep:#f5f7fa;--bg-panel:#ffffff;--bg-panel-alt:#f1f3f6;--border:#d9dde3;--border-soft:#e4e8ed;--txt:#1b1f24;--txt-dim:#6a727d;--accent:#111;--focus:rgba(0,0,0,.18);--transition:.5s cubic-bezier(.16,.8,.32,1);--radius-xl:32px}
body{background:radial-gradient(circle at 30% 20%,#ffffff 0%,#f1f4f7 55%,#e7ebef 100%)!important;font-family:'Inter',sans-serif;color:var(--txt)}
.container.mt-4{padding:0;margin:0;max-width:100%;}
/* NAV */
.auth-nav{position:fixed;top:0;left:0;width:100%;z-index:60;background:rgba(255,255,255,.85);backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);border-bottom:1px solid var(--border)}
.auth-nav__inner{max-width:1380px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:14px clamp(1rem,3vw,48px)}
.auth-brand{font-size:1.15rem;font-weight:700;letter-spacing:.05em;display:flex;align-items:center;gap:.4rem;color:var(--accent)}
.auth-brand span{font-weight:500;opacity:.55;font-size:.85rem}
.auth-links{list-style:none;display:flex;gap:2.2rem;margin:0;padding:0}
.auth-links a{position:relative;font-weight:500;text-decoration:none;color:#6d737c;font-size:.8rem;letter-spacing:.15em;text-transform:uppercase;transition:var(--transition)}
.auth-links a:before{content:"";position:absolute;left:0;bottom:-8px;height:2px;width:0;background:var(--accent);transition:var(--transition)}
.auth-links a:hover{color:var(--accent)}.auth-links a:hover:before{width:100%}
.auth-links a.active{color:var(--accent)}.auth-links a.active:before{width:100%}
@media (max-width:760px){.auth-links{gap:1.3rem}.auth-links a{font-size:.68rem}}
@media (max-width:560px){.auth-links{display:none}}
/* LAYOUT */
.register-wrapper{padding-top:110px;min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;background:radial-gradient(circle at 35% 25%,#ffffff 0%,#f2f5f8 55%,#e9edf1 100%)}
.register-wrapper:before,.register-wrapper:after{content:"";position:absolute;width:560px;height:560px;border-radius:50%;filter:blur(120px);opacity:.5;z-index:0}
.register-wrapper:before{top:-140px;left:-140px;background:linear-gradient(135deg,#ffffff,#e4e8ed)}
.register-wrapper:after{bottom:-170px;right:-150px;background:linear-gradient(135deg,#ffffff,#dde2e7)}
.register-card{width:100%;max-width:1180px;display:grid;grid-template-columns:repeat(auto-fit,minmax(470px,1fr));background:linear-gradient(140deg,rgba(255,255,255,.92),rgba(255,255,255,.86));backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);border:1px solid var(--border);border-radius:var(--radius-xl);overflow:hidden;box-shadow:0 18px 44px -14px rgba(27,31,36,.08),0 4px 18px -4px rgba(27,31,36,.06);position:relative;z-index:1}
.register-visual{padding:64px 60px;display:flex;flex-direction:column;justify-content:space-between;border-right:1px solid var(--border-soft);background:linear-gradient(160deg,#fff,#f3f5f8)}
@media (max-width:980px){.register-visual{border-right:none;border-bottom:1px solid var(--border-soft)}}
.register-visual h1{font-size:2.55rem;line-height:1.08;font-weight:800;margin:1.2rem 0 .75rem;background:linear-gradient(90deg,#111,#444);-webkit-background-clip:text;color:transparent;letter-spacing:-.5px}
.register-visual p.lead{font-size:.95rem;line-height:1.6;color:var(--txt-dim);max-width:380px;font-weight:500}
.brand-badge{display:inline-flex;align-items:center;gap:.55rem;padding:.55rem .9rem;border-radius:14px;font-size:.65rem;font-weight:700;letter-spacing:.18em;background:#f1f4f7;border:1px solid var(--border);color:var(--txt-dim)}
.feature-mini-grid{margin-top:2.1rem;display:grid;grid-template-columns:repeat(3,1fr);gap:1.1rem}
.feature-mini{padding:.85rem .75rem;background:#f4f6f9;border:1px solid var(--border);border-radius:18px;text-align:center;transition:var(--transition);position:relative;overflow:hidden}
.feature-mini i{display:block;font-size:1.2rem;margin-bottom:.4rem;color:var(--accent)}
.feature-mini span{font-size:.6rem;font-weight:600;letter-spacing:.08em;color:var(--txt-dim);text-transform:uppercase}
.feature-mini:hover{transform:translateY(-6px);border-color:var(--accent);background:#fff}
/* FORM SIDE */
.register-form-side{padding:64px 62px 60px;display:flex;flex-direction:column;gap:2.2rem;justify-content:center;position:relative}
@media (max-width:980px){.register-form-side{padding:56px 54px}}@media (max-width:640px){.register-form-side{padding:44px 36px}}
.form-header h2{font-size:2.05rem;font-weight:800;background:linear-gradient(90deg,#111,#333);-webkit-background-clip:text;color:transparent;letter-spacing:-.5px;margin:0}
.form-header p{color:var(--txt-dim);margin-top:.6rem;font-weight:500;font-size:.9rem}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.35rem} @media (max-width:780px){.form-grid{grid-template-columns:1fr}}
.form-group{display:flex;flex-direction:column;gap:.55rem}
.form-group label{font-size:.68rem;font-weight:600;letter-spacing:.15em;text-transform:uppercase;color:var(--txt-dim);display:flex;align-items:center;gap:.45rem}
.input-shell{position:relative}
.input-shell input{width:100%;background:#f3f5f7;border:1px solid var(--border);color:var(--txt);font-size:.95rem;padding:1rem 1.1rem 1rem 3.1rem;border-radius:18px;font-weight:500;outline:none;transition:var(--transition)}
.input-shell input::placeholder{color:#9aa2ab}
.input-shell input:focus{background:#fff;border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,0,0,.08),0 10px 25px -12px rgba(0,0,0,.14)}
.input-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:2.1rem;height:2.1rem;border-radius:14px;display:flex;align-items:center;justify-content:center;background:#ebeef2;color:#111;font-size:.9rem;border:1px solid var(--border)}
.toggle-pass{position:absolute;right:.85rem;top:50%;transform:translateY(-50%);background:#edf0f3;border:1px solid var(--border);color:#111;width:40px;height:40px;border-radius:14px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:var(--transition)}
.toggle-pass:hover{background:#fff}
.helper-row{display:flex;justify-content:space-between;align-items:center;gap:1.5rem;margin-top:.1rem;flex-wrap:wrap}
.checkbox-wrap{display:inline-flex;align-items:center;gap:.65rem;cursor:pointer;font-size:.7rem;font-weight:600;color:var(--txt-dim);user-select:none}
.checkbox-wrap input{appearance:none;width:20px;height:20px;border:2px solid var(--border);border-radius:7px;display:grid;place-items:center;background:#f3f5f7;transition:var(--transition)}
.checkbox-wrap input:checked{background:var(--accent);box-shadow:0 0 0 3px rgba(0,0,0,.12);border-color:var(--accent)}
.checkbox-wrap input:checked:after{content:"✔";font-size:.75rem;line-height:1;color:#fff;font-weight:700}
.btn-primary{position:relative;overflow:hidden;width:100%;border:none;border-radius:22px;padding:1.05rem 1.3rem;font-size:.85rem;font-weight:700;letter-spacing:.18em;text-transform:uppercase;background:linear-gradient(90deg,#111 0%,#333 50%,#111 100%);background-size:220% 100%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.65rem;transition:var(--transition);box-shadow:0 12px 32px -12px rgba(0,0,0,.25)}
.btn-primary:hover{background-position:100% 50%;transform:translateY(-4px);box-shadow:0 18px 48px -14px rgba(0,0,0,.35)}
.btn-primary:active{transform:translateY(-1px) scale(.98)}
.btn-primary .loading-spinner{width:22px;height:22px;border:3px solid rgba(255,255,255,.35);border-top:3px solid #fff;border-radius:50%;animation:spin .85s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.feedback-msg{margin-top:.35rem;font-size:.65rem;font-weight:600;letter-spacing:.05em}
.feedback-error{color:#dc2626}.feedback-ok{color:#059669}
.password-strength{display:flex;gap:.4rem;margin-top:.55rem}
.password-strength span{flex:1;height:5px;border-radius:4px;background:#e2e6ea;transition:.4s}
.password-strength span.active-weak{background:#f87171}
.password-strength span.active-mid{background:#fbbf24}
.password-strength span.active-good{background:#3b82f6}
.password-strength span.active-strong{background:#10b981}
.alt-box{margin-top:1.1rem;background:#f5f7fa;border:1px solid var(--border);padding:1.15rem 1.25rem;border-radius:20px;font-size:.8rem;font-weight:500;color:var(--txt-dim);text-align:center}
.alt-box a{color:var(--accent);font-weight:600;text-decoration:none;position:relative}
.alt-box a:after{content:"";position:absolute;left:0;bottom:-4px;width:0;height:2px;background:var(--accent);transition:var(--transition)}
.alt-box a:hover:after{width:100%}
.inline-toast{font-family:'Inter',sans-serif}
.fade-in-up{opacity:0;transform:translateY(26px);animation:fadeUp .9s .15s forwards cubic-bezier(.16,.8,.32,1)}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
.error-shake{animation:shake .45s cubic-bezier(.36,.07,.19,.97) both}
@keyframes shake{10%,90%{transform:translateX(-2px)}20%,80%{transform:translateX(4px)}30%,50%,70%{transform:translateX(-8px)}40%,60%{transform:translateX(8px)}}
</style>
<div class="register-wrapper">
  <div class="register-card fade-in-up">
    <div class="register-visual">
      <div>
        <span class="brand-badge"><i class="fas fa-bolt"></i> SHOESTORE</span>
        <h1>Tạo Tài Khoản<br>Mới</h1>
        <p class="lead">Đăng ký để truy cập hệ thống bán giày tối ưu, quản lý đơn hàng & trải nghiệm mua sắm thông minh.</p>
        <div class="feature-mini-grid">
          <div class="feature-mini"><i class="fas fa-lock"></i><span>Bảo mật</span></div>
            <div class="feature-mini"><i class="fas fa-rocket"></i><span>Nhanh</span></div>
            <div class="feature-mini"><i class="fas fa-shield-alt"></i><span>Ổn định</span></div>
        </div>
      </div>
      <small style="opacity:.55;font-weight:500;letter-spacing:.05em;color:var(--txt-dim)">© 2025 ShoeStore</small>
    </div>
    <div class="register-form-side">
      <div class="form-header">
        <h2>Đăng Ký</h2>
        <p>Nhập thông tin để tạo tài khoản của bạn.</p>
      </div>
      <form id="registerForm" action="{{ url_for('register_submit') }}" method="POST" novalidate>
        <div class="form-grid">
          <div class="form-group">
            <label for="fullname"><i class="fas fa-user"></i> Họ tên</label>
            <div class="input-shell">
              <span class="input-icon"><i class="fas fa-id-card"></i></span>
              <input id="fullname" name="fullname" type="text" placeholder="Tên của bạn" required>
            </div>
            <div id="fullname-feedback" class="feedback-msg"></div>
          </div>
          <div class="form-group">
            <label for="phone"><i class="fas fa-phone"></i> Số điện thoại</label>
            <div class="input-shell">
              <span class="input-icon"><i class="fas fa-mobile-alt"></i></span>
              <input id="phone" name="phone" type="tel" placeholder="0123456789" required>
            </div>
            <div id="phone-feedback" class="feedback-msg"></div>
          </div>
          <div class="form-group">
            <label for="email"><i class="fas fa-envelope"></i> Email</label>
            <div class="input-shell">
              <span class="input-icon"><i class="fas fa-at"></i></span>
              <input id="email" name="email" type="email" placeholder="ban@example.com" required>
            </div>
            <div id="email-feedback" class="feedback-msg"></div>
          </div>
          <div class="form-group">
            <label for="password"><i class="fas fa-lock"></i> Mật khẩu</label>
            <div class="input-shell">
              <span class="input-icon"><i class="fas fa-key"></i></span>
              <input id="password" name="password" type="password" placeholder="Ít nhất 8 ký tự" required>
              <button type="button" class="toggle-pass" id="togglePassword" aria-label="Hiện / Ẩn mật khẩu"><i class="fas fa-eye"></i></button>
            </div>
            <div class="password-strength" aria-hidden="true">
              <span id="bar1"></span><span id="bar2"></span><span id="bar3"></span><span id="bar4"></span>
            </div>
            <div id="password-feedback" class="feedback-msg"></div>
          </div>
          <div class="form-group">
            <label for="confirm-password"><i class="fas fa-shield-alt"></i> Xác nhận</label>
            <div class="input-shell">
              <span class="input-icon"><i class="fas fa-check"></i></span>
              <input id="confirm-password" name="confirm-password" type="password" placeholder="Nhập lại mật khẩu" required>
            </div>
            <div id="confirm-feedback" class="feedback-msg"></div>
          </div>
          <div class="form-group" style="align-self:flex-end;margin-top:10px">
            <label class="checkbox-wrap" style="user-select:none">
              <input id="terms" name="terms" type="checkbox" checked>
              <span>Đồng ý điều khoản</span>
            </label>
          </div>
        </div>
        <button id="registerBtn" type="submit" class="btn-primary" style="margin-top:.5rem">
          <span class="btn-text"><i class="fas fa-user-plus"></i> Tạo tài khoản</span>
        </button>
        <div class="alt-box">Đã có tài khoản? <a href="{{ url_for('login') }}">Đăng nhập ngay</a></div>
      </form>
    </div>
  </div>
</div>
<script>(function(){
 const fullname=document.getElementById('fullname');
 const phone=document.getElementById('phone');
 const email=document.getElementById('email');
 const password=document.getElementById('password');
 const confirmPassword=document.getElementById('confirm-password');
 const terms=document.getElementById('terms');
 const form=document.getElementById('registerForm');
 const btn=document.getElementById('registerBtn');
 const togglePass=document.getElementById('togglePassword');
 const bars=[bar1,bar2,bar3,bar4];
 function showToast(msg,type='info'){document.querySelectorAll('.inline-toast').forEach(t=>t.remove());const wrap=document.createElement('div');wrap.className='inline-toast';wrap.style.cssText='position:fixed;top:26px;right:26px;z-index:9999;display:flex;align-items:center;gap:.85rem;background:#111;color:#fff;padding:.95rem 1.15rem;border:1px solid #222;border-radius:18px;font-weight:600;animation:toastIn .45s var(--transition)';const icons={success:'fa-check-circle',error:'fa-exclamation-triangle',info:'fa-info-circle'};wrap.innerHTML=`<i class="fas ${icons[type]||icons.info}" style="font-size:1.05rem"></i><span style="font-size:.85rem">${msg}</span><button style='background:rgba(255,255,255,.08);border:1px solid #222;color:#fff;padding:.4rem .65rem;border-radius:10px;cursor:pointer;font-size:.6rem;font-weight:600;letter-spacing:.12em'>ĐÓNG</button>`;wrap.querySelector('button').onclick=()=>wrap.remove();document.body.appendChild(wrap);setTimeout(()=>{wrap.style.animation='toastOut .4s forwards';setTimeout(()=>wrap.remove(),380)},4200);}const toastKF=document.createElement('style');toastKF.textContent='@keyframes toastIn{from{transform:translateY(-14px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes toastOut{to{transform:translateY(-10px);opacity:0}}';document.head.appendChild(toastKF);
 togglePass.addEventListener('click',()=>{const t=password.type==='password'?'text':'password';password.type=t;togglePass.firstElementChild.classList.toggle('fa-eye');togglePass.firstElementChild.classList.toggle('fa-eye-slash');});
 function mark(el,msg,ok){const fb=document.getElementById(el.id+'-feedback');if(!fb)return;fb.textContent=msg;fb.className='feedback-msg '+(ok?'feedback-ok':'feedback-error');el.classList.toggle('error-shake',!ok);} 
 function strength(pw){let s=0;if(pw.length>=8)s++;if(/[a-z]/.test(pw))s++;if(/[A-Z]/.test(pw))s++;if(/[0-9]/.test(pw))s++;if(/[^A-Za-z0-9]/.test(pw))s++;bars.forEach(b=>b.className='');if(s>0)bars[0].classList.add('active-weak');if(s>2)bars[1].classList.add('active-mid');if(s>3)bars[2].classList.add('active-good');if(s>4)bars[3].classList.add('active-strong');return s;}
 fullname.addEventListener('input',()=>{const v=fullname.value.trim();mark(fullname,v.length>=3?'Hợp lệ':'Tối thiểu 3 ký tự',v.length>=3)});
 phone.addEventListener('input',()=>{let v=phone.value.replace(/\D/g,'').slice(0,11);phone.value=v;mark(phone,/^[0-9]{10,11}$/.test(v)?'Số hợp lệ':'10-11 số',/^[0-9]{10,11}$/.test(v))});
 email.addEventListener('input',()=>{const v=email.value.trim();const ok=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);mark(email,ok?'Email hợp lệ':'Email không hợp lệ',ok)});
 password.addEventListener('input',()=>{const sc=strength(password.value);mark(password,sc>=3?'Mật khẩu ổn':'Yếu - thêm ký tự & ký hiệu',sc>=3);if(confirmPassword.value)confirmPassword.dispatchEvent(new Event('input'));});
 confirmPassword.addEventListener('input',()=>{const ok=password.value&&confirmPassword.value===password.value;mark(confirmPassword,ok?'Khớp':'Không khớp',ok)});
 form.addEventListener('submit',e=>{let valid=true;[fullname,phone,email,password,confirmPassword].forEach(i=>{if(!i.value.trim())valid=false});if(fullname.value.trim().length<3)valid=false;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value))valid=false;if(!/^[0-9]{10,11}$/.test(phone.value))valid=false;if(strength(password.value)<3)valid=false;if(password.value!==confirmPassword.value)valid=false;if(!valid){e.preventDefault();showToast('Vui lòng kiểm tra lại thông tin','error');return;}btn.disabled=true;btn.dataset.original=btn.innerHTML;btn.innerHTML='<span class="loading-spinner"></span> Đang xử lý...';});})();</script>
{% endblock %}